<html>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport'
        content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'>
  <meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <title>Document</title>
</head>
<body>

<div id="root"></div>

<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@16.14.0",
    "react-dom": "https://esm.sh/react-dom@16.14.0",
    "@atlas-viewer/iiif-image-api": "../node_modules/@atlas-viewer/iiif-image-api/dist/esm/index.mjs",
    "@iiif/vault": "../node_modules/@iiif/vault/dist/esm/index.mjs",
    "@iiif/vault-helpers": "../node_modules/@iiif/vault-helpers/dist/esm/index.mjs",
    "@iiif/parser": "../node_modules/@iiif/parser/dist/esm/index.mjs",
    "typesafe-actions": "../node_modules/typesafe-actions/dist/typesafe-actions.es.production.js",
    "redux": "../node_modules/redux/es/redux.mjs",
    "react-iiif-vault": "../dist/esm/index.mjs"
  }
}
</script>

<script type="module">
  import { VaultProvider, useExternalManifest } from 'react-iiif-vault';
  import { createElement } from 'react';
  import { render } from 'react-dom';
  import { getValue } from '@iiif/vault-helpers'

  function Component(props) {
    const { manifest } = useExternalManifest(props.id);

    return createElement('div', {}, [
      createElement('h1', {}, [ manifest ? getValue(manifest.label) : null ]),
      createElement('pre', {}, [JSON.stringify(manifest, null, 2)])])
  }


  render(
    // <VaultProvider>
    createElement(VaultProvider, {}, [
      // <Component>
      createElement(Component, { id: 'https://iiif.wellcomecollection.org/presentation/v2/b18035723' }, [])
    ]),
    document.getElementById('root')
  );

</script>
</body>
</html>
